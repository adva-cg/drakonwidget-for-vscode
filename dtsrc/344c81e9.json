{"version":20180619,"tag":"705947221","params":"widget\nclipboard\nevt","when_created":1667025156.5723,"parent_id":"f7515898","props":[],"when_updated":1690566387.0609,"items":{"40":{"type":"action","id":"40","one":"37","text":"currentZ++"},"31":{"type":"action","id":"31","one":"6","text":"config = widget.visuals.config"},"21":{"one":"27","id":"21","type":"action","two":"","text":"dx = pos.x - epos.x\ndy = pos.y - epos.y"},"41":{"flag1":0,"id":"41","type":"question","text":"item.type === \"connection\"","one":"33","two":"26"},"32":{"type":"action","text":"setFreePosition(item, x, y)","one":"26","id":"32"},"11":{"type":"action","id":"11","one":"45","text":"payload = clipboard.content"},"23":{"flag1":1,"id":"23","type":"question","two":"25","one":"24","text":"evt"},"33":{"type":"action","text":"oldPos = getFreePosition(item)","one":"28","id":"33"},"43":{"type":"action","text":"await loadCreatedImages(\n    widget,\n    edits,\n    images\n)","one":"20","id":"43"},"34":{"branchId":3,"one":"35","id":"34","type":"branch","text":"z-indexes"},"45":{"type":"action","id":"45","one":"31","text":"images = payload.images"},"24":{"type":"action","text":"pos = toDiagram(widget, evt)","one":"21","id":"24"},"6":{"one":"8","id":"6","type":"action","text":"edits = []","two":""},"16":{"branchId":4,"one":"18","id":"16","type":"branch","text":"Create items"},"35":{"type":"action","text":"utils.sortBy(payload.items, \"zIndex\")","one":"46","id":"35"},"25":{"one":"30","id":"25","type":"action","two":"","text":"pos = getDiagramCenter(widget)"},"46":{"type":"action","id":"46","one":"38","text":"currentZ = getNextZIndex(widget)"},"26":{"type":"loopend","id":"26","one":"34","text":""},"27":{"type":"loopbegin","text":"item; payload.items","one":"41","id":"27"},"37":{"type":"loopend","text":"","one":"16","id":"37"},"38":{"type":"loopbegin","id":"38","one":"42","text":"item; payload.items"},"28":{"type":"action","text":"x = snapUp(config, oldPos.x + dx)\ny = snapUp(config, oldPos.y + dy)","one":"32","id":"28"},"18":{"one":"19","id":"18","type":"action","text":"create = function (item) {\n    createPastedItem(edits, item)\n}","two":""},"29":{"type":"action","text":"first = payload.items[0]\nepos = getFreePosition(first)","one":"23","id":"29"},"19":{"one":"43","id":"19","type":"action","text":"payload.items.forEach(create)","two":""},"8":{"one":"17","id":"8","type":"action","two":"","text":"replaceIds(\n    widget,\n    undefined,\n    payload.items,\n    \"\"\n)"},"42":{"flag1":0,"id":"42","type":"question","text":"item.type === \"connection\"","one":"39","two":"37"},"17":{"branchId":2,"one":"29","id":"17","type":"branch","text":"Calculate insertion coordinates"},"2":{"branchId":1,"one":"11","id":"2","type":"branch","text":"Generate new ids"},"30":{"one":"27","id":"30","type":"action","two":"","text":"dx = pos.x - epos.x - 100\ndy = pos.y - epos.y - 100"},"1":{"type":"end","id":"1"},"39":{"type":"action","text":"item.zIndex = currentZ","one":"40","id":"39"},"20":{"one":"1","id":"20","type":"action","text":"return doEdit(widget, edits)","two":""}},"type":"drakon","keywords":{"scenario":false,"async":true,"export":false,"function":true,"algoprop":false},"updated_by":"stipan","language":"LANG_S42","name":"pasteFree","created_by":"stipan"}