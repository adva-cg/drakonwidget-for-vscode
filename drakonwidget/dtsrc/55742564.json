{"keywords":{"scenario":false,"async":false,"export":false,"function":true,"algoprop":false},"tag":"838650333","params":"widget\ndiagram","when_created":1661365399.5968,"parent_id":"befd80d4","props":[],"when_updated":1687248701.8484,"items":{"4":{"branchId":5,"one":"1","id":"4","type":"branch","text":"Exit"},"21":{"flag1":0,"id":"21","type":"question","text":"model.branches.length === 0","one":"20","two":"53"},"22":{"type":"action","id":"22","one":"23","text":"end = createNewItem(model, \"end\")\nbranch = createNewItem(model, \"branch\")"},"23":{"type":"action","text":"branch.branchId = 0\nbranch.one = end.id","one":"24","id":"23"},"7":{"type":"loopbegin","id":"7","one":"50","text":"itemId, item; diagram.items"},"51":{"flag1":1,"id":"51","type":"question","two":"33","one":"52","text":"diagram.style"},"52":{"type":"action","id":"52","one":"33","text":"model.doc.style = JSON.parse(\n    diagram.style\n)"},"13":{"type":"action","id":"13","one":"14","text":"idNum = parseInt(item.id)"},"14":{"flag1":0,"id":"14","type":"question","two":"6","one":"15","text":"isNaN(idNum)"},"34":{"type":"action","text":"model.nextId = nextId + 1","one":"16","id":"34"},"53":{"flag1":1,"id":"53","type":"question","text":"type === \"drakon\"","one":"22","two":"39"},"24":{"type":"action","id":"24","one":"39","text":"diagram.initial.push(createInsert(end))\ndiagram.initial.push(\n    createInsert(branch)\n)"},"15":{"type":"action","id":"15","one":"6","text":"nextId = Math.max(nextId, idNum)"},"16":{"branchId":3,"one":"21","id":"16","type":"branch","text":"Sort branches"},"35":{"type":"action","text":"addItemToModel(model, item)","one":"13","id":"35"},"46":{"type":"action","id":"46","one":"4","text":"widget.touchEvents.run()\nwidget.mouseEvents.run()"},"54":{"type":"action","id":"54","one":"18","text":"type = diagram.type || \"drakon\""},"47":{"type":"action","id":"47","one":"56","text":"widget.mouseEvents = NoSelectBehavior_create(\n    widget\n)"},"37":{"branchId":4,"one":"44","id":"37","type":"branch","text":"Mouse events"},"56":{"type":"action","text":"widget.touchEvents = TouchBehavior_create(\n    widget\n)","one":"46","id":"56"},"48":{"type":"action","text":"widget.mouseEvents = SelectBehavior_create(\n    widget\n)","one":"56","id":"48"},"39":{"type":"action","id":"39","one":"37","text":"widget.model = model"},"49":{"type":"action","text":"diagram.initial = []","one":"54","id":"49"},"19":{"type":"action","text":"model.doc.access = diagram.access || \"write\"\nmodel.doc.name = diagram.name || \"\"\nmodel.doc.keywords = utils.clone(\n    diagram.keywords || {}\n)\nmodel.doc.params = diagram.params || \"\"\nmodel.doc.description = diagram.description\n|| \"\"","one":"51","id":"19"},"6":{"type":"loopend","id":"6","one":"34","text":""},"5":{"branchId":2,"one":"7","id":"5","type":"branch","text":"Items"},"1":{"type":"end","id":"1"},"18":{"type":"action","id":"18","one":"19","text":"model = {\n    items: {},\n    doc: {},\n    branches: [],\n    edits: [],\n    type: type\n}"},"45":{"flag1":1,"id":"45","type":"question","text":"widget.config.canSelect","one":"48","two":"47"},"44":{"type":"action","text":"stopMachine(widget, \"mouseEvents\")","one":"45","id":"44"},"2":{"branchId":1,"one":"49","id":"2","type":"branch","text":"Reset data structures"},"33":{"type":"action","text":"nextId = 0","one":"5","id":"33"},"50":{"type":"action","id":"50","one":"35","text":"item.id = itemId"},"20":{"type":"action","id":"20","one":"39","text":"model.branches.sort(\n    function (a, b) {\n        return compareBranches(\n            a,\n            b,\n            model.items\n        )\n    }\n)"}},"updated_by":"stipan","version":20180619,"type":"drakon","language":"LANG_S42","name":"buildDiagramModel","created_by":"stipan"}